<!--
AUTO-ASSEMBLED FILE. Do not hand-edit.
Source bundle: PRD-002-ant-colony-idle-tycoon
Generated: 2026-01-25T10:15:39Z
-->

# PRD-002 — PRD (assembled)

This is an assembled view of the PRD bundle. Use the component files for edits.


## Coversheet

ID: PRD-002
Title: Ant Colony Idle Tycoon
DocType: PRD (Many-release Program Bible)
Version: 0.1
Status: Draft
Updated: 2026-01-25
Dependencies: RA-001,VPD-001
Owner: codex
EditPolicy: DO_NOT_EDIT_DIRECTLY (use scripts; see .codex/skills/phosphene/cerulean/product-management/modulator/SKILL.md)

## Purpose (read first)

This is a **PRD bundle**: the `<product-management>` primary artifact.

It exists to make requirements work:
- scoped (what are we building now?)
- traceable (what did this depend on?)
- testable (acceptance criteria + validation plan are explicit)

## Links

- Research assessment(s) (input): [link]
- Persona pack (input): [link]
- Proposition and messaging (input): [link]
- Roadmap (input): [link]
- ADR index: [link]
- Repo: [link]


## Executive summary

ID: PRD-002

# 1) Executive Summary

[V-SCRIPT]:
./.codex/skills/phosphene/cerulean/product-management/modulator/scripts/assemble_prd_bundle.sh

## 1.1 One-paragraph summary
[What this product is, who it is for, and the primary value delivered.]

## 1.2 The problem
- **Current user pain:** [...]
- **Business pain:** [...]
- **Why now:** [...]

## 1.3 The solution (high-level)
- **Primary capability:** [...]
- **Key differentiators:** [...]
- **Constraints that shape the solution:** [...]

## 1.4 What “success” looks like
- **User success:** [...]
- **Business success:** [...]
- **Operational success:** [...]

## Product context

ID: PRD-002

# 2) Product Context and Strategy

## 2.1 Product narrative
- **Target users:** [...]
- **Usage context:** [...]
- **Primary workflows:** [...]

## 2.2 Market and competitive landscape (optional but recommended)
- **Alternatives users choose today:** [...]
- **Differentiation thesis:** [...]
- **Switching costs and adoption barriers:** [...]

## 2.3 Strategic alignment
- **Company strategy alignment:** [...]
- **Portfolio fit:** [...]
- **Ecosystem fit:** [...]

## 2.4 Guiding principles (design and engineering)
- [Principle] -> [Implication for decisions]

## Personas, jobs, and propositions

ID: PRD-002

# 3) Personas, Jobs, and Value Propositions

## 3.1 Persona index
| Persona ID | Persona Name | Segment | Primary Context | Key Constraints | Link |
|---|---|---|---|---|---|
| PER-0001 | E2E Persona | Curious sandbox gamer | Web idle simulation on laptop/desktop | Low friction, clear progress feedback, fast load | `phosphene/domains/product-marketing/output/value-proposition-designs/VPD-001-e2e-vpd-for-ra-001-issue-16/10-personas/PER-0001-e2e-persona.md` |

## 3.2 Jobs-to-be-done (JTBD)
For each persona, capture functional, emotional, and social jobs, plus triggers and success criteria.

### Persona: PER-0001 (E2E Persona)
- **Job statement:** When I have a short session window, I want to make meaningful progress in a legible simulation, so I can feel like I advanced a system I understand (not just clicked a number).
- **Trigger events:** “I have 5 minutes”, returning after idle time, seeing an interesting upgrade option.
- **Current workaround:** abandon complex sims that take too long to load/understand; rely on opaque idle games that feel like spreadsheets.
- **Outcome metrics (user-level):** time-to-first-progress, clarity of cause/effect, frequency of “interesting choice” moments.
- **Failure modes:** progress feels random; UI hides what changed; performance jank breaks trust.

## 3.3 Key propositions and proof points
| Proposition ID | Proposition | Primary Persona(s) | Proof / Evidence | Differentiator Type | Objections | Rebuttal / Mitigation |
|---|---|---|---|---|---|---|
| PROP-0001 | A fast, readable idle simulation that rewards experimentation and makes “why progress happened” obvious. | PER-0001 | RA-001; `PROP-0001` formal pitch | product + tech | “Idle sims are boring / opaque.” | Make the model observable (stats, causes, tooltips), and keep the loop snappy (fast load + stable FPS). |

## 3.4 Value proposition to capability mapping
| Proposition ID | Required Capabilities | UX Implications | Technical Implications | Metrics |
|---|---|---|---|---|
| PROP-0001 | Deterministic sim loop; offline progress; clear upgrade choices; explainable outcomes; performance stability | Immediate “what changed” feedback; visible causality; low-friction onboarding | WebGPU render path; state snapshotting; event instrumentation; deterministic PRNG/tick | time_to_first_progress, fps_p50, retention_d1 |

## Goals and scope

ID: PRD-002

# 4) Goals, Non-goals, and Scope

## 4.1 Goals (outcome-based)
- G1: [...]
- G2: [...]

## 4.2 Non-goals (explicit exclusions)
- NG1: [...]

## 4.3 In-scope and out-of-scope
| Area | In Scope | Out of Scope | Notes |
|---|---|---|---|
| [Area] | ✅ | ❌ | [...] |

## 4.4 Assumptions
- A1: [...]

## 4.5 Dependencies
- D1: [...]

## Success metrics

ID: PRD-002

# 5) Success Metrics and Measurement

## 5.1 Metrics framework
Define metrics across: acquisition, activation, engagement, retention, revenue, reliability, cost.

## 5.2 North Star metric
- **North Star:** **Meaningful progress per active session** (proxy: “upgrade purchases + net resource delta” per session for PER-0001)
- **Why it reflects value:** PROP-0001 is about rewarding experimentation with readable outcomes; progress moments are the core value delivery.
- **Guardrails:** fps_p50, boot_to_play_seconds, crash_free_sessions

## 5.3 KPI definitions
| KPI | Definition | Event Sources | Query Logic | Target | Alert Threshold | Owner |
|---|---|---|---|---:|---:|---|
| time_to_first_progress | Seconds from session_start to first upgrade_purchase or first “progress summary shown”. | event.session_start, event.upgrade_purchase, event.offline_progress_applied | min(t_progress)-t_start | 180 | 300 | PM |
| fps_p50 | Median FPS over sessions (1× speed). | metric.fps_p50 | p50(fps_p50) | 45 | 30 | Eng |
| boot_to_play_seconds | Seconds from load to first interactive frame. | metric.boot_to_play_seconds | p50(boot_to_play_seconds) | 2.0 | 3.0 | Eng |
| explain_view_rate | % sessions where “What changed?” is opened at least once. | event.explain_view | sessions_with_explain / sessions | 0.25 | 0.10 | PM |
| progress_attribution_coverage | % of net delta attributable to explicit causes (upgrades/offline/ticks). | metric.progress_attribution_coverage | p50(coverage) | 0.90 | 0.70 | Eng |

## 5.4 Experimentation plan
- **Hypotheses to validate:** PER-0001 will return if they can understand “why progress happened” and make at least one meaningful upgrade choice in the first session.
- **Experiment types:** onboarding variants, explainability UI variants, performance degradation/fallback measurement.
- **Decision criteria:** improved time_to_first_progress without harming fps_p50 or boot_to_play_seconds.

## Requirements

ID: PRD-002

# Requirements

This folder splits requirements into functional vs non-functional.

ID: PRD-002

# 6) Requirements — functional

## 6.1 Requirement conventions
- **Requirement IDs:** R-CORE-001, R-SPEC-001, etc.
- **Modality:** shall/should/may

## 6.2 Functional requirements (FRs)
This PRD’s functional requirements are grounded in the upstream inputs listed in `Dependencies:`:
- **Persona(s):** PER-0001
- **Proposition(s):** PROP-0001

| Req ID | Statement | Priority | Persona(s) | Proposition(s) | Acceptance Criteria | Telemetry | Notes |
|---|---|---:|---|---|---|---|---|
| R-CORE-001 | The system shall run a deterministic simulation tick loop that updates colony state in discrete steps and produces the same result given the same inputs. | P0 | PER-0001 | PROP-0001 | Given a fixed seed and identical upgrade choices. When the sim is advanced for N ticks twice. Then the resulting colony state snapshots are identical (hash match). | event.sim_tick; metric.sim_tick_ms; metric.state_hash_mismatch | Determinism is a trust primitive for PER-0001 (explainability). |
| R-CORE-002 | The system shall render the colony state using a WebGPU-backed path that is visually legible and maintains smooth interaction. | P0 | PER-0001 | PROP-0001 | Given a mid-tier laptop. When the player runs the sim at 1× speed for 60 seconds. Then FPS stays above 30 for p50 and input latency stays below 100ms p95. | metric.fps_p50; metric.input_latency_p95; event.render_frame | If WebGPU is unavailable, degrade gracefully (fallback rendering) without crashing. |
| R-CORE-003 | The system shall support offline progress by advancing simulation state based on elapsed wall-clock time since last active session. | P0 | PER-0001 | PROP-0001 | Given the player closes the app. When they return after T minutes. Then the app computes delta progress, shows a summary of what changed, and applies the updated state without stalling longer than 2 seconds. | event.offline_progress_applied; metric.offline_delta_seconds; metric.boot_to_play_seconds | Offline progress must be explainable (“why you gained X”). |
| R-CORE-004 | The system shall persist and restore game state (including upgrades, resources, and sim parameters) across sessions with integrity checks. | P0 | PER-0001 | PROP-0001 | Given a saved state exists. When the player reloads the page. Then the restored state matches the last committed snapshot and corrupt saves are detected and recovered to a safe baseline. | event.save_commit; event.save_load; event.save_corrupt_detected | Prefer small, frequent snapshots over giant monolith saves. |
| R-CORE-005 | The system shall provide an upgrade purchase workflow that surfaces cost, effect, and expected outcome in plain language. | P0 | PER-0001 | PROP-0001 | Given the player views an upgrade. When they hover/click for details. Then they can see cost, effect size, and a “why this matters” tooltip, and purchasing updates state immediately with confirmation feedback. | event.upgrade_view; event.upgrade_purchase; metric.upgrade_conversion | This is where “rewards experimentation” becomes concrete for PROP-0001. |
| R-CORE-006 | The system shall offer a minimal onboarding/tutorial that gets PER-0001 to first meaningful progress quickly without hiding depth. | P1 | PER-0001 | PROP-0001 | Given a first-time player. When they complete the first 3 guided actions. Then they understand the main loop, make at least one upgrade choice, and see the causal link to progress in under 3 minutes. | metric.time_to_first_progress; event.tutorial_step_complete | Keep it light: guidance, not a forced modal lecture. |
| R-CORE-007 | The system shall instrument key events and metrics needed to validate PROP-0001 and detect performance regressions. | P1 | PER-0001 | PROP-0001 | Given a production session. When the user plays for 5 minutes. Then events include sim ticks, offline application, upgrade purchases, and performance metrics, and dashboards can compute activation/retention proxies. | event.session_start; event.session_end; metric.fps_p50; metric.boot_to_play_seconds | Telemetry is a first-class requirement, not an afterthought. |
| R-CORE-008 | The system shall expose a compact “explainability” surface that attributes progress to causes (upgrades, elapsed time, sim parameters). | P1 | PER-0001 | PROP-0001 | Given the player’s resources increased. When they open the “What changed?” panel. Then they can see a ranked list of causes and a short natural-language explanation of the largest contributors. | event.explain_view; metric.explain_view_rate; metric.progress_attribution_coverage | This reduces the “opaque idle” objection to PROP-0001. |

ID: PRD-002

# 6) Requirements — non-functional

Define measurable thresholds and verification methods.

## Performance and latency
| NFR ID | Scenario | Threshold | Measurement Method | Environment | Notes |
|---|---|---:|---|---|---|
| NFR-PERF-001 | [API p95 latency] | [ms] | [APM metric] | [prod-like] | |

## Availability and resilience
| NFR ID | SLO | Target | Error Budget Policy | Degradation Modes | Notes |
|---|---|---:|---|---|---|
| NFR-REL-001 | [availability] | [99.9%] | [policy] | [read-only, queued] | |

## Feature catalogue

ID: PRD-002

# Feature catalogue

Split into core vs special features.

ID: PRD-002

# 7) Feature Catalogue — core

## 7.2 Core features (detailed)

### Feature: Simulation loop + state engine
- **Feature ID:** F-CORE-01
- **Summary:** Deterministic simulation tick loop that evolves the colony, supports offline progress, and persists state safely.
- **Primary persona(s):** PER-0001
- **Linked propositions:** PROP-0001
- **User story:** As PER-0001, I want progress to be consistent and explainable so I can trust the model and experiment without feeling scammed.
- **Workflow steps:**
  1. Initialize state from saved snapshot (or safe baseline).
  2. Run deterministic tick loop; commit snapshots periodically.
  3. On resume, compute elapsed time and apply offline delta with a summary.
- **Functional requirements:** R-CORE-001, R-CORE-003, R-CORE-004
- **Edge cases and failure modes:**
  - Corrupt save detected -> recover to last-known-good snapshot and notify.
  - Very long idle gap -> cap delta or apply in chunks to avoid lockups.
- **Telemetry:** event.sim_tick, event.offline_progress_applied, event.save_commit, metric.sim_tick_ms
- **Risks:** determinism broken by floating point drift -> fixed-step math + state hashing tests.

### Feature: WebGPU renderer + interaction layer
- **Feature ID:** F-CORE-02
- **Summary:** WebGPU-backed renderer that keeps the colony visually legible and responsive under load.
- **Primary persona(s):** PER-0001
- **Linked propositions:** PROP-0001
- **User story:** As PER-0001, I want the simulation to feel alive and smooth so I can “read” what’s happening at a glance.
- **Workflow steps:**
  1. Map sim state to render buffers.
  2. Render frames at stable cadence; degrade gracefully if WebGPU unavailable.
  3. Surface key state changes with lightweight UI affordances (highlights, counters).
- **Functional requirements:** R-CORE-002, R-CORE-007
- **Edge cases and failure modes:**
  - WebGPU not supported -> fallback render path with reduced fidelity.
  - GPU resource exhaustion -> lower resolution or reduce particle count.
- **Telemetry:** event.render_frame, metric.fps_p50, metric.input_latency_p95
- **Risks:** performance regressions -> perf budget + CI guardrails + instrumentation.

### Feature: Upgrades + explainability UI
- **Feature ID:** F-CORE-03
- **Summary:** Upgrade workflow that explains cost/effect and attributes progress to causes (“what changed and why”).
- **Primary persona(s):** PER-0001
- **Linked propositions:** PROP-0001
- **User story:** As PER-0001, I want to choose upgrades intelligently and understand their impact so experimentation feels rewarding.
- **Workflow steps:**
  1. Browse upgrades with clear effect descriptions and costs.
  2. Purchase upgrade; state updates immediately with confirmation feedback.
  3. Open “What changed?” panel to see progress attribution and top contributors.
- **Functional requirements:** R-CORE-005, R-CORE-008, R-CORE-007
- **Telemetry:** event.upgrade_view, event.upgrade_purchase, event.explain_view, metric.progress_attribution_coverage

ID: PRD-002

# 7) Feature Catalogue — special

### Feature: [SPEC-01 Name]
- **Feature ID:** F-SPEC-01
- **Why it matters:** [...]
- **Dependencies:** [...]

## Architecture

ID: PRD-002

# 8) Architecture and Technical Design

## 8.1 Architecture overview
- **Architecture style:** [...]
- **Primary runtime model:** [...]
- **Core boundaries:** [...]

## Platform and technology

ID: PRD-002

# 9) Platform Selection and Technology Standards

## 9.1 Selection criteria
Define explicit criteria and scoring.

## 9.2 Platform choices (with rationale)
[...]

## Data, integrations, and APIs

ID: PRD-002

# 10) Data, Integrations, and APIs

## 10.1 Data model overview
[...]

## Security, privacy, and compliance

ID: PRD-002

# 11) Security, Privacy, and Compliance

## 11.1 Data classification and handling
[...]

## UX, content, and accessibility

ID: PRD-002

# 12) UX, Content, and Accessibility

## 12.1 UX principles and constraints
[...]

## Delivery plan and roadmap

ID: PRD-002

# 13) Delivery Plan and Roadmap

## 13.1 Program structure
[...]

## Testing and quality strategy

ID: PRD-002

# 14) Testing and Quality Strategy

## 14.1 Test pyramid and scope
[...]

## Operations and support model

ID: PRD-002

# 15) Operations and Support Model

## 15.1 Operational posture
[...]

## Risks, dependencies, and assumptions

ID: PRD-002

# 16) Risks, Dependencies, and Assumptions

## 16.1 Risk register
| Risk | Likelihood | Impact | Exposure | Mitigation | Owner | Status |
|---|---:|---:|---:|---|---|---|
| [risk] | [L/M/H] | [L/M/H] | [score] | [mitigation] | | |

## Release readiness and launch plan

ID: PRD-002

# 17) Release Readiness and Launch Plan

## 17.1 Launch strategy
[...]

## Appendix

ID: PRD-002

# Appendix

This folder holds glossary, decision log, open questions, and traceability.

ID: PRD-002

# 18) Appendix — glossary

| Term | Definition |
|---|---|
| [term] | [definition] |

ID: PRD-002

# 18) Appendix — decision log

| Date | Decision | Rationale | Owner | Link |
|---|---|---|---|---|
| 2026-01-25 | Use PRD bundle decomposition (assembled view + authoritative subfiles) for PRD-002. | Keeps edits modular while preserving a single assembled artifact for reading/review. | codex | (n/a) |

ID: PRD-002

# 18) Appendix — open questions

| ID | Question | Why it matters | Owner | Due Date | Status |
|---|---|---|---|---|---|
| Q1 | [question] | [impact] | | | |

ID: PRD-002

# 18) Appendix — traceability matrix

| Proposition ID | Capability | Feature ID(s) | Requirement ID(s) | Metric(s) | Notes |
|---|---|---|---|---|---|
| PROP-0001 | Deterministic sim loop | F-CORE-01 | R-CORE-001 | state_hash_mismatch_rate | Determinism underpins explainability/trust for PER-0001. |
| PROP-0001 | Offline progress | F-CORE-01 | R-CORE-003, R-CORE-004 | boot_to_play_seconds; offline_delta_seconds | Resume must be fast and legible. |
| PROP-0001 | Smooth, readable rendering | F-CORE-02 | R-CORE-002 | fps_p50; input_latency_p95 | Performance is part of “readable” value. |
| PROP-0001 | Rewarding upgrades + explainability | F-CORE-03 | R-CORE-005, R-CORE-008 | upgrade_conversion; explain_view_rate | Make causes visible to reduce “opaque idle” objection. |
