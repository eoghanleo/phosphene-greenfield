name: "instrument.apparatus.modulator.product-marketing.summon"

on:
  workflow_call:
    inputs:
      issue_number:
        required: true
        type: number
      intent:
        required: true
        type: string
  workflow_dispatch:
    inputs:
      issue_number:
        description: "Issue number to comment on"
        required: true
        type: number
      intent:
        description: "Intent string"
        required: true
        type: string

permissions:
  issues: write
  contents: read

jobs:
  summon:
    uses: ./.github/workflows/lib.prism.dispatch_codex.yml
    secrets: inherit
    with:
      issue_number: ${{ inputs.issue_number }}
      body: |
        @codex

        PHOSPHENE apparatus: **modulator.product_marketing** â†’ <product-marketing>

        **Intent:** ${{ inputs.intent }}

        **Constraints (PHOSPHENE):**
        - Single primary domain: <product-marketing>
        - Read `phosphene/AGENTS.md`
        - Read `.codex/skills/phosphene/product-marketing/SKILL.md`
        - Prefer domain control scripts; avoid hand-editing script-managed artifacts
        - Validate as appropriate + `./phosphene/phosphene-core/bin/phosphene id validate`
        - Write DONE signal: `phosphene/domains/product-marketing/signals/<VPD-###>-DONE.json` (required; name it after the parent artifact WORK_ID)

        If you need clarifications, ask exactly one question and stop.

